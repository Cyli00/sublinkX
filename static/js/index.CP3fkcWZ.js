import{d as e,r as a,b0 as s,aC as l,aD as o,ay as r,aS as t,a$ as n,B as i,aE as c,Q as d,o as p,c as u,e as m,l as g,$ as f,g as h,aT as v,aU as w,aQ as j,w as x,t as b,aJ as y,a7 as _,a5 as C,a3 as V,a6 as K,ae as q,b1 as E,aO as k}from"./index.B5EkDzSe.js";import{E as $}from"./el-card.C8hzq6sH.js";import{E as z,a as A}from"./el-form-item.CoQg9UD9.js";import{E as U}from"./el-image-viewer.524hvTx_.js";import"./el-tooltip.l0sNRNKZ.js";import{E as D}from"./el-popper.5vJ0nHTn.js";import{S as L}from"./index.CBIcqPhq.js";import{E as O}from"./el-tag.C-RZJJr8.js";import{c as R,_ as B}from"./el-switch.C8xp4yV-.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.C8zluFKn.js";import"./_initCloneObject.B9uKNKbL.js";import"./index.w3DC5PVV.js";import"./debounce.Bk_438JU.js";import"./position.Zwhs1OVK.js";import"./index.3DrrgpJ_.js";import"./el-scrollbar.D_FsbYB4.js";import"./dropdown.CEZU3-gs.js";import"./refs.D8PQuTkx.js";const S={class:"login-container"},T={class:"absolute-lt flex-x-end p-3 w-full"},F={class:"text-center relative"},H={class:"flex-y-center w-full"},J={class:"flex-y-center w-full"},M={class:"flex-y-center w-full"},Q=I(e({__name:"index",setup(e){const I=a("");s().then((e=>{I.value=e.data})).catch((e=>{}));const Q=l(),G=o(),{t:N}=r(),P=a(G.theme===t.DARK),W=a(!0),X=a(!1),Y=a(!1),Z=a(),ee=a(z),{height:ae}=n(),se=a({username:"",password:""}),le=i((()=>({username:[{required:!0,trigger:"blur",message:N("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:N("login.message.password.required")},{min:6,message:N("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:N("login.message.captchaCode.required")}]})));function oe(){E().then((({data:e})=>{se.value.captchaKey=e.captchaKey,Z.value=e.captchaBase64}))}const re=c();function te(){ee.value.validate((e=>{e&&(X.value=!0,Q.login(se.value).then((()=>{const e=re.query,a=e.redirect??"/",s=Object.keys(e).reduce(((a,s)=>("redirect"!==s&&(a[s]=e[s]),a)),{});k.push({path:a,query:s})})).catch((()=>{oe()})).finally((()=>{X.value=!1})))}))}const ne=()=>{const e=G.theme===t.DARK?t.LIGHT:t.DARK;G.changeTheme(e)};function ie(e){e instanceof KeyboardEvent&&(Y.value=e.getModifierState("CapsLock"))}return d((()=>{ae.value<600?W.value=!1:W.value=!0})),p((()=>{oe()})),(e,a)=>{const s=R,l=B,o=O,r=L,t=C,n=A,i=D,c=U,d=K,p=z,E=$;return m(),u("div",S,[g("div",T,[f(s,{modelValue:h(P),"onUpdate:modelValue":a[0]||(a[0]=e=>j(P)?P.value=e:null),"inline-prompt":"","active-icon":h(w),"inactive-icon":h(v),onChange:ne},null,8,["modelValue","active-icon","inactive-icon"]),f(l,{class:"ml-2 cursor-pointer"})]),f(E,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:x((()=>[g("div",F,[g("h2",null,b(h(y).title),1),f(o,{class:"ml-2 absolute-rt"},{default:x((()=>[_(b(h(I)),1)])),_:1})]),f(p,{ref_key:"loginFormRef",ref:ee,model:h(se),rules:h(le),class:"login-form"},{default:x((()=>[f(n,{prop:"username"},{default:x((()=>[g("div",H,[f(r,{"icon-class":"user",class:"mx-2"}),f(t,{ref:"username",modelValue:h(se).username,"onUpdate:modelValue":a[1]||(a[1]=e=>h(se).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),f(i,{visible:h(Y),content:e.$t("login.capsLock"),placement:"right"},{default:x((()=>[f(n,{prop:"password"},{default:x((()=>[g("div",J,[f(r,{"icon-class":"lock",class:"mx-2"}),f(t,{modelValue:h(se).password,"onUpdate:modelValue":a[2]||(a[2]=e=>h(se).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[ie,V(te,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),f(n,{prop:"captchaCode"},{default:x((()=>[g("div",M,[f(r,{"icon-class":"captcha",class:"mx-2"}),f(t,{modelValue:h(se).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>h(se).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:V(te,["enter"])},null,8,["modelValue","placeholder"]),f(c,{onClick:oe,src:h(Z),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])])),_:1}),f(d,{loading:h(X),type:"primary",size:"large",class:"w-full",onClick:q(te,["prevent"])},{default:x((()=>[_(b(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-ba695567"]]);export{Q as default};
